javascript:(function() {    if (document.getElementById('gpt-toolkit-panel')) {        document.getElementById('gpt-toolkit-panel').remove();        return;    }    var API_KEY = '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';    var PROXIES = ['', 'https://corsproxy.io/?', 'https://api.allorigins.win/raw?url=', 'https://corsproxy.org/?'];    var currentProxyIndex = 0;    function fetchWithProxy(url, options, retryCount) {        retryCount = retryCount || 0;        var proxyUrl = PROXIES[currentProxyIndex] ? PROXIES[currentProxyIndex] + encodeURIComponent(url) : url;        return fetch(proxyUrl, options).then(function(r) { if (!r.ok && retryCount < PROXIES.length - 1) { currentProxyIndex = (currentProxyIndex + 1) % PROXIES.length; return fetchWithProxy(url, options, retryCount + 1); } return r; }).catch(function(e) { if (retryCount < PROXIES.length - 1) { currentProxyIndex = (currentProxyIndex + 1) % PROXIES.length; return fetchWithProxy(url, options, retryCount + 1); } throw new Error('Network blocked. Try mobile data or VPN.'); });    }    var styleEl = document.createElement('style');    styleEl.textContent = '#gpt-toolkit-panel{position:fixed;top:20px;right:20px;width:420px;height:520px;background:#1a1a1a;border:1px solid #333;border-radius:8px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:13px;color:#e0e0e0;z-index:2147483647;display:flex;flex-direction:column;box-shadow:none;resize:both;overflow:hidden;transition:height 0.25s ease-out}#gpt-toolkit-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#252525;border-bottom:1px solid #333;cursor:move;user-select:none}#gpt-toolkit-title{font-weight:600;font-size:14px;color:#fff}#gpt-toolkit-close{background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:0;line-height:1}#gpt-toolkit-close:hover,#gpt-toolkit-min:hover{color:#fff}#gpt-toolkit-tabs{display:flex;background:#202020;border-bottom:1px solid #333}.gpt-toolkit-tab{flex:1;padding:10px 16px;background:none;border:none;color:#888;cursor:pointer;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;transition:all 0.2s;border-bottom:2px solid transparent}.gpt-toolkit-tab:hover{color:#bbb;background:#282828}.gpt-toolkit-tab.active{color:#4a9eff;border-bottom-color:#4a9eff;background:#252525}#gpt-toolkit-content{flex:1;overflow:hidden;display:flex;flex-direction:column}.gpt-toolkit-panel-content{display:none;flex:1;flex-direction:column;overflow:hidden}.gpt-toolkit-panel-content.active{display:flex}#gpt-console-output{flex:1;overflow-y:auto;padding:12px;font-family:Consolas,Monaco,monospace;font-size:12px;background:#0d0d0d;line-height:1.5}.console-line{padding:2px 0;border-bottom:1px solid #1a1a1a}.console-line.log{color:#e0e0e0}.console-line.error{color:#ff6b6b}.console-line.warn{color:#ffd93d}.console-line.info{color:#4a9eff}.console-line.success{color:#6bcf63}#gpt-console-input-wrap{display:flex;border-top:1px solid #333;background:#1a1a1a}#gpt-console-prompt{padding:10px 12px;color:#4a9eff;font-family:Consolas,Monaco,monospace}#gpt-console-input{flex:1;background:none;border:none;color:#e0e0e0;font-family:Consolas,Monaco,monospace;font-size:12px;padding:10px 12px 10px 0;outline:none}#gpt-console-execute{background:#4a9eff;border:none;border-radius:4px;color:#fff;padding:6px 14px;margin:6px 8px 6px 0;cursor:pointer;font-weight:500;font-size:11px}#gpt-console-execute:hover{background:#3d8be0}#gpt-ai-messages{flex:1;overflow-y:auto;padding:12px;background:#0d0d0d}.ai-message{margin-bottom:12px;padding:10px 12px;border-radius:6px;line-height:1.5}.ai-message.user{background:#1e3a5f;margin-left:40px}.ai-message.assistant{background:#252525;margin-right:40px}.ai-message.system{background:#2a2a2a;color:#888;font-size:11px;text-align:center}#gpt-ai-input-wrap{display:flex;align-items:flex-end;border-top:1px solid #333;background:#1a1a1a;padding:8px;gap:8px}#gpt-ai-input{flex:1;background:#252525;border:1px solid #333;border-radius:4px;color:#e0e0e0;font-size:13px;padding:8px 12px;outline:none;resize:none;min-height:20px;max-height:80px}#gpt-ai-input:focus{border-color:#4a9eff}#gpt-ai-send{background:#4a9eff;border:none;border-radius:4px;color:#fff;padding:8px 16px;cursor:pointer;font-weight:500;font-size:12px}#gpt-ai-send:hover{background:#3d8be0}#gpt-ai-send:disabled{background:#333;color:#666;cursor:not-allowed}#gpt-tools-grid{padding:16px;display:grid;grid-template-columns:1fr 1fr;gap:10px;overflow-y:auto}.gpt-tool-btn{background:#252525;border:1px solid #333;border-radius:6px;color:#e0e0e0;padding:12px;cursor:pointer;text-align:left;transition:all 0.2s}.gpt-tool-btn:hover{background:#2a2a2a;border-color:#4a9eff}.gpt-tool-btn-title{font-weight:500;margin-bottom:4px}.gpt-tool-btn-desc{font-size:11px;color:#888}#gpt-toolkit-panel::-webkit-scrollbar,#gpt-console-output::-webkit-scrollbar,#gpt-ai-messages::-webkit-scrollbar{width:6px}#gpt-toolkit-panel::-webkit-scrollbar-track,#gpt-console-output::-webkit-scrollbar-track,#gpt-ai-messages::-webkit-scrollbar-track{background:#1a1a1a}#gpt-toolkit-panel::-webkit-scrollbar-thumb,#gpt-console-output::-webkit-scrollbar-thumb,#gpt-ai-messages::-webkit-scrollbar-thumb{background:#444;border-radius:3px}.loading-dots::after{content:"";animation:dots 1.5s steps(4,end) infinite}@keyframes dots{0%,20%{content:""}40%{content:"."}60%{content:".."}80%,100%{content:"..."}}#gpt-picker-highlight{position:fixed;pointer-events:none;border:2px solid #4a9eff;background:rgba(74,158,255,0.15);z-index:2147483646;transition:all 0.05s}.gpt-tool-btn.active{background:#4a9eff;border-color:#4a9eff;color:#fff}';    document.head.appendChild(styleEl);    var panel = document.createElement('div');    panel.id = 'gpt-toolkit-panel';    panel.innerHTML = '<div id="gpt-toolkit-header"><span id="gpt-toolkit-title">Developer Toolkit</span><div style="display:flex;gap:8px"><button id="gpt-toolkit-min" style="background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:0;line-height:1">-</button><button id="gpt-toolkit-close" style="background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:0;line-height:1">x</button></div></div><div id="gpt-toolkit-tabs"><button class="gpt-toolkit-tab active" data-tab="console">Console</button><button class="gpt-toolkit-tab" data-tab="ai">AI Assistant</button><button class="gpt-toolkit-tab" data-tab="tools">Tools</button></div><div id="gpt-toolkit-content"><div class="gpt-toolkit-panel-content active" id="panel-console"><div id="gpt-console-output"></div><div id="gpt-console-input-wrap"><span id="gpt-console-prompt">&gt;</span><input type="text" id="gpt-console-input" placeholder="Enter JavaScript..." autocomplete="off"><button id="gpt-console-execute">Execute</button></div></div><div class="gpt-toolkit-panel-content" id="panel-ai"><div id="gpt-ai-messages"><div class="ai-message system">AI Assistant ready. Ask questions about this page or request help.</div></div><div id="gpt-ai-input-wrap"><textarea id="gpt-ai-input" placeholder="Ask AI..." rows="1"></textarea><button id="gpt-ai-send">Send</button></div></div><div class="gpt-toolkit-panel-content" id="panel-tools"><div id="gpt-tools-grid"><button class="gpt-tool-btn" data-action="getPageInfo"><div class="gpt-tool-btn-title">Page Info</div><div class="gpt-tool-btn-desc">Get current page metadata</div></button><button class="gpt-tool-btn" data-action="getSelection"><div class="gpt-tool-btn-title">Get Selection</div><div class="gpt-tool-btn-desc">Copy selected text</div></button><button class="gpt-tool-btn" data-action="getLinks"><div class="gpt-tool-btn-title">Extract Links</div><div class="gpt-tool-btn-desc">List all page links</div></button><button class="gpt-tool-btn" data-action="getImages"><div class="gpt-tool-btn-title">Extract Images</div><div class="gpt-tool-btn-desc">List all page images</div></button><button class="gpt-tool-btn" data-action="getCookies"><div class="gpt-tool-btn-title">View Cookies</div><div class="gpt-tool-btn-desc">Display page cookies</div></button><button class="gpt-tool-btn" data-action="getStorage"><div class="gpt-tool-btn-title">Local Storage</div><div class="gpt-tool-btn-desc">View stored data</div></button><button class="gpt-tool-btn" data-action="searchGoogle"><div class="gpt-tool-btn-title">Google Search</div><div class="gpt-tool-btn-desc">Search selected text</div></button><button class="gpt-tool-btn" data-action="clearConsole"><div class="gpt-tool-btn-title">Clear Console</div><div class="gpt-tool-btn-desc">Clear console output</div></button><button class="gpt-tool-btn" data-action="pickElement" id="gpt-pick-btn"><div class="gpt-tool-btn-title">Pick Element</div><div class="gpt-tool-btn-desc">Click to select element</div></button><button class="gpt-tool-btn" data-action="pickColor" id="gpt-color-btn"><div class="gpt-tool-btn-title">Color Picker</div><div class="gpt-tool-btn-desc">Get color from element</div></button><button class="gpt-tool-btn" data-action="perfInfo"><div class="gpt-tool-btn-title">Performance</div><div class="gpt-tool-btn-desc">Page load stats</div></button><button class="gpt-tool-btn" data-action="networkLog"><div class="gpt-tool-btn-title">Network Log</div><div class="gpt-tool-btn-desc">Intercept requests</div></button><button class="gpt-tool-btn" data-action="summarizePage"><div class="gpt-tool-btn-title">Summarize Page</div><div class="gpt-tool-btn-desc">AI summarizes content</div></button><button class="gpt-tool-btn" data-action="readAloud"><div class="gpt-tool-btn-title">Read Aloud</div><div class="gpt-tool-btn-desc">Speak selected text</div></button><button class="gpt-tool-btn" data-action="answerHelper"><div class="gpt-tool-btn-title">Answer Helper</div><div class="gpt-tool-btn-desc">Select question, AI answers aloud</div></button><button class="gpt-tool-btn" data-action="chatWithPage"><div class="gpt-tool-btn-title">Chat With Page</div><div class="gpt-tool-btn-desc">Ask about page content</div></button><button class="gpt-tool-btn" data-action="changeVoice"><div class="gpt-tool-btn-title">Change Voice</div><div class="gpt-tool-btn-desc">Pick TTS voice</div></button><button class="gpt-tool-btn" data-action="aiSmartFill"><div class="gpt-tool-btn-title">AI Smart Fill</div><div class="gpt-tool-btn-desc">AI fills forms intelligently</div></button><button class="gpt-tool-btn" data-action="killSticky"><div class="gpt-tool-btn-title">Kill Sticky & Ads</div><div class="gpt-tool-btn-desc">Remove popups and ads</div></button><button class="gpt-tool-btn" data-action="revealPasswords"><div class="gpt-tool-btn-title">Reveal Passwords</div><div class="gpt-tool-btn-desc">Show password fields</div></button><button class="gpt-tool-btn" data-action="editPage"><div class="gpt-tool-btn-title">Edit Page</div><div class="gpt-tool-btn-desc">Make page editable</div></button><button class="gpt-tool-btn" data-action="wireframeMode"><div class="gpt-tool-btn-title">Wireframe Mode</div><div class="gpt-tool-btn-desc">See page structure</div></button><button class="gpt-tool-btn" data-action="metaTags"><div class="gpt-tool-btn-title">Meta Tags</div><div class="gpt-tool-btn-desc">View SEO meta tags</div></button><button class="gpt-tool-btn" data-action="brokenLinks"><div class="gpt-tool-btn-title">Broken Links</div><div class="gpt-tool-btn-desc">Find dead links</div></button><button class="gpt-tool-btn" data-action="fontInspector"><div class="gpt-tool-btn-title">Font Inspector</div><div class="gpt-tool-btn-desc">List all fonts used</div></button><button class="gpt-tool-btn" data-action="aiTranslate"><div class="gpt-tool-btn-title">AI Translate</div><div class="gpt-tool-btn-desc">Translate selected text</div></button><button class="gpt-tool-btn" data-action="aiRewrite"><div class="gpt-tool-btn-title">AI Rewrite</div><div class="gpt-tool-btn-desc">Rewrite in different tone</div></button><button class="gpt-tool-btn" data-action="aiExtractData"><div class="gpt-tool-btn-title">AI Extract Data</div><div class="gpt-tool-btn-desc">Pull emails, phones, addresses</div></button></div></div></div>';    document.body.appendChild(panel);    var consoleOutput = document.getElementById('gpt-console-output');    var consoleInput = document.getElementById('gpt-console-input');    var aiMessages = document.getElementById('gpt-ai-messages');    var aiInput = document.getElementById('gpt-ai-input');    var aiSend = document.getElementById('gpt-ai-send');    var commandHistory = [];    var historyIndex = -1;    var conversationHistory = [];    var lastGeneratedCode = '';    var retryCount = 0;    var pickedElement = null;    var isPickerActive = false;    var isColorPickerActive = false;    var pickerHighlight = null;    var networkLogs = [];    var isNetworkLogging = false;    var speechSynth = window.speechSynthesis;    var pageContentCache = '';    var selectedVoice = null;    var lastInputElement = null;    var lastInputSelection = { start: 0, end: 0, text: '' };    document.addEventListener('selectionchange', function() {        var el = document.activeElement;        if (el && (el.tagName === 'TEXTAREA' || (el.tagName === 'INPUT' && el.type === 'text')) && !el.closest('#gpt-toolkit-panel')) {            if (el.selectionStart !== el.selectionEnd) {                lastInputElement = el;                lastInputSelection = { start: el.selectionStart, end: el.selectionEnd, text: el.value.substring(el.selectionStart, el.selectionEnd) };            }        }    });    function loadVoices() {        var voices = speechSynth.getVoices();        if (voices.length === 0) return;        var dominated = voices.filter(function(v) {             return v.name.indexOf('Microsoft') !== -1 || v.name.indexOf('Google') !== -1 || v.name.indexOf('Natural') !== -1 || v.name.indexOf('Neural') !== -1;        });        var english = voices.filter(function(v) { return v.lang.indexOf('en') === 0; });        selectedVoice = dominated[0] || english[0] || voices[0];    }    speechSynth.onvoiceschanged = loadVoices;    loadVoices();    function speak(text, callback) {        if (speechSynth.speaking) speechSynth.cancel();        var utter = new SpeechSynthesisUtterance(text);        utter.rate = 1.0;        utter.pitch = 1;        if (selectedVoice) utter.voice = selectedVoice;        if (callback) utter.onend = callback;        speechSynth.speak(utter);    }    function getPageContent() {        var content = '';        var main = document.querySelector('main, article, [role="main"], .content, #content');        if (main) {            content = main.innerText;        } else {            content = document.body.innerText;        }        return content.replace(/\s+/g, ' ').substring(0, 6000);    }    function askAIWithContext(question, context, speakAnswer) {        log('AI thinking...', 'info');        var prompt = 'Context from webpage:\n' + context + '\n\nQuestion: ' + question + '\n\nAnswer concisely (2-3 sentences max).';                fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {            method: 'POST',            headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },            body: JSON.stringify({                model: 'llama-3.3-70b-versatile',                messages: [{ role: 'user', content: prompt }],                max_tokens: 300            })        })        .then(function(r) { return r.json(); })        .then(function(data) {            if (data.error) throw new Error(data.error.message);            var answer = data.choices[0].message.content;            log('Answer: ' + answer, 'success');            if (speakAnswer) {                speak(answer);            }        })        .catch(function(e) {            log('Error: ' + e.message, 'error');        });    }    function getSelector(el) {        if (el.id) return '#' + el.id;        var path = [];        while (el && el.nodeType === 1) {            var selector = el.tagName.toLowerCase();            if (el.className && typeof el.className === 'string') {                var classes = el.className.trim().split(/\s+/).filter(function(c) { return c && c.indexOf('gpt-') === -1; });                if (classes.length) selector += '.' + classes.slice(0, 2).join('.');            }            path.unshift(selector);            if (path.length >= 3) break;            el = el.parentElement;        }        return path.join(' > ');    }    function getElementInfo(el) {        var rect = el.getBoundingClientRect();        var styles = window.getComputedStyle(el);        return {            tag: el.tagName.toLowerCase(),            id: el.id || null,            classes: el.className || null,            selector: getSelector(el),            text: (el.textContent || '').substring(0, 100).trim(),            dimensions: Math.round(rect.width) + 'x' + Math.round(rect.height),            position: Math.round(rect.left) + ',' + Math.round(rect.top),            bg: styles.backgroundColor,            color: styles.color,            font: styles.fontSize + ' ' + styles.fontFamily.split(',')[0]        };    }    function createHighlight() {        if (!pickerHighlight) {            pickerHighlight = document.createElement('div');            pickerHighlight.id = 'gpt-picker-highlight';            document.body.appendChild(pickerHighlight);        }        return pickerHighlight;    }    function showHighlight(el) {        var hl = createHighlight();        var rect = el.getBoundingClientRect();        hl.style.display = 'block';        hl.style.left = rect.left + 'px';        hl.style.top = rect.top + 'px';        hl.style.width = rect.width + 'px';        hl.style.height = rect.height + 'px';    }    function hideHighlight() {        if (pickerHighlight) pickerHighlight.style.display = 'none';    }    function pickerMouseMove(e) {        var el = document.elementFromPoint(e.clientX, e.clientY);        if (!el || el.closest('#gpt-toolkit-panel') || el.id === 'gpt-picker-highlight') return;        showHighlight(el);    }    function pickerClick(e) {        hideHighlight();        var el = document.elementFromPoint(e.clientX, e.clientY);        if (!el || el.closest('#gpt-toolkit-panel') || el.id === 'gpt-picker-highlight') return;        e.preventDefault();        e.stopPropagation();        stopPicker();                if (isColorPickerActive) {            var styles = window.getComputedStyle(el);            var bg = styles.backgroundColor;            var fg = styles.color;            log('--- Color Picked ---', 'info');            log('Background: ' + bg);            log('Text Color: ' + fg);            navigator.clipboard.writeText(bg);            log('Background color copied!', 'success');            isColorPickerActive = false;            document.getElementById('gpt-color-btn').classList.remove('active');        } else {            pickedElement = getElementInfo(el);            var tagStr = '<' + pickedElement.tag;            if (pickedElement.id) tagStr += ' id="' + pickedElement.id + '"';            if (pickedElement.classes && typeof pickedElement.classes === 'string') tagStr += ' class="' + pickedElement.classes.trim() + '"';            tagStr += '>';            log('--- Element Picked ---', 'info');            log('Element: ' + tagStr);            log('Selector: ' + pickedElement.selector);            log('Size: ' + pickedElement.dimensions + ' @ ' + pickedElement.position);            log('Colors: bg=' + pickedElement.bg + ' text=' + pickedElement.color);            if (pickedElement.text) log('Text: "' + pickedElement.text.substring(0, 60) + '"');            var clipText = '[Element: ' + tagStr + ' selector="' + pickedElement.selector + '" size=' + pickedElement.dimensions + ']';            if (pickedElement.text) clipText += ' text="' + pickedElement.text.substring(0, 40) + '"';            navigator.clipboard.writeText(clipText);            log('Copied! Paste in AI chat.', 'success');            document.getElementById('gpt-pick-btn').classList.remove('active');        }    }    function stopPicker() {        isPickerActive = false;        document.removeEventListener('mousemove', pickerMouseMove, true);        document.removeEventListener('click', pickerClick, true);        hideHighlight();        document.body.style.cursor = '';    }    function startPicker(colorMode) {        if (isPickerActive) { stopPicker(); return; }        isPickerActive = true;        isColorPickerActive = colorMode || false;        document.body.style.cursor = 'crosshair';        document.addEventListener('mousemove', pickerMouseMove, true);        document.addEventListener('click', pickerClick, true);        log(colorMode ? 'Color picker active. Click any element.' : 'Element picker active. Click any element.', 'info');    }    function log(msg, type) {        type = type || 'log';        var line = document.createElement('div');        line.className = 'console-line ' + type;        line.textContent = typeof msg === 'object' ? JSON.stringify(msg, null, 2) : String(msg);        consoleOutput.appendChild(line);        consoleOutput.scrollTop = consoleOutput.scrollHeight;    }    function executeCommand(cmd) {        if (!cmd.trim()) return;        commandHistory.unshift(cmd);        historyIndex = -1;        log('> ' + cmd, 'info');        try {            var result = eval(cmd);            if (result !== undefined) log(result, 'success');            retryCount = 0;        } catch (e) {            log(e.message, 'error');            if (lastGeneratedCode && lastGeneratedCode === cmd && retryCount < 3) {                retryCount++;                log('AI fixing code (attempt ' + retryCount + ')...', 'warn');                fixCode(cmd, e.message);            }        }    }    function fixCode(badCode, errorMsg) {        var fixPrompt = 'Fix this JS code. Error: "' + errorMsg + '". Code: ' + badCode + '. Output ONLY fixed code, nothing else.';                fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {            method: 'POST',            headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },            body: JSON.stringify({                model: 'llama-3.3-70b-versatile',                messages: [{ role: 'user', content: fixPrompt }],                max_tokens: 1024            })        })        .then(function(r) { return r.json(); })        .then(function(data) {            if (data.error) throw new Error(data.error.message);            var fixedCode = data.choices[0].message.content;            fixedCode = fixedCode.replace(/%60%60%60javascript\n?/gi, '').replace(/%60%60%60js\n?/gi, '').replace(/%60%60%60\n?/g, '').trim();            lastGeneratedCode = fixedCode;            consoleInput.value = '';            var i = 0;            function typeIt() {                if (i < fixedCode.length) {                    consoleInput.value += fixedCode[i];                    i++;                    setTimeout(typeIt, 5);                } else {                    log('Fixed. Click Execute.', 'success');                }            }            typeIt();        })        .catch(function(e) {            log('Fix failed: ' + e.message, 'error');        });    }    consoleInput.addEventListener('keydown', function(e) {        if (e.key === 'Enter') {            executeCommand(consoleInput.value);            consoleInput.value = '';        } else if (e.key === 'ArrowUp' && historyIndex < commandHistory.length - 1) {            historyIndex++;            consoleInput.value = commandHistory[historyIndex];        } else if (e.key === 'ArrowDown') {            if (historyIndex > 0) {                historyIndex--;                consoleInput.value = commandHistory[historyIndex];            } else {                historyIndex = -1;                consoleInput.value = '';            }        }    });    document.getElementById('gpt-console-execute').addEventListener('click', function() {        if (consoleInput.value.trim()) {            executeCommand(consoleInput.value);            consoleInput.value = '';        }    });    document.querySelectorAll('.gpt-toolkit-tab').forEach(function(tab) {        tab.addEventListener('click', function() {            document.querySelectorAll('.gpt-toolkit-tab').forEach(function(t) { t.classList.remove('active'); });            document.querySelectorAll('.gpt-toolkit-panel-content').forEach(function(p) { p.classList.remove('active'); });            tab.classList.add('active');            document.getElementById('panel-' + tab.dataset.tab).classList.add('active');        });    });    document.getElementById('gpt-toolkit-close').addEventListener('click', function() {        panel.remove();        styleEl.remove();    });    var isMinimized = false;    var savedHeight = '520px';    document.getElementById('gpt-toolkit-min').addEventListener('click', function() {        var tabs = document.getElementById('gpt-toolkit-tabs');        var content = document.getElementById('gpt-toolkit-content');        var minBtn = document.getElementById('gpt-toolkit-min');        if (isMinimized) {            panel.style.height = savedHeight;            panel.style.resize = 'both';            minBtn.textContent = '-';            setTimeout(function() {                tabs.style.display = 'flex';                content.style.display = 'flex';            }, 150);            isMinimized = false;        } else {            savedHeight = panel.style.height || '520px';            tabs.style.display = 'none';            content.style.display = 'none';            panel.style.height = '44px';            panel.style.resize = 'none';            minBtn.textContent = '+';            isMinimized = true;        }    });    var header = document.getElementById('gpt-toolkit-header');    var isDragging = false;    var dragOffset = { x: 0, y: 0 };    header.addEventListener('mousedown', function(e) {        isDragging = true;        dragOffset.x = e.clientX - panel.offsetLeft;        dragOffset.y = e.clientY - panel.offsetTop;    });    document.addEventListener('mousemove', function(e) {        if (isDragging) {            panel.style.left = (e.clientX - dragOffset.x) + 'px';            panel.style.top = (e.clientY - dragOffset.y) + 'px';            panel.style.right = 'auto';        }    });    document.addEventListener('mouseup', function() { isDragging = false; });    function sendToAI(message) {        var userMsgEl = document.createElement('div');        userMsgEl.className = 'ai-message user';        userMsgEl.textContent = message;        aiMessages.appendChild(userMsgEl);        var loadingEl = document.createElement('div');        loadingEl.className = 'ai-message assistant loading-dots';        loadingEl.textContent = 'Thinking';        aiMessages.appendChild(loadingEl);        aiMessages.scrollTop = aiMessages.scrollHeight;        aiSend.disabled = true;        conversationHistory.push({ role: 'user', content: message });        var lowerMsg = message.toLowerCase();        var stopWords = ['stop', 'dont', "don't", 'no ', 'cancel', 'halt', 'quit', 'exit', 'enough', 'never', 'not ', "won't", 'wont', 'please no', 'stop it'];        var hasStopWord = stopWords.some(function(sw) { return lowerMsg.indexOf(sw) !== -1; });        var codeKeywords = ['script', 'code', 'console', 'make', 'create', 'write', 'generate', 'build', 'run', 'execute', 'function', 'change', 'modify', 'remove', 'add', 'delete', 'hide', 'show', 'click', 'style', 'color', 'animate', 'spin', 'rotate', 'move', 'resize', 'redirect', 'alert', 'log', 'loop', 'replace', 'inject', 'dom', 'element', 'selector', 'query'];        var isScriptRequest = !hasStopWord && codeKeywords.some(function(kw) { return lowerMsg.indexOf(kw) !== -1; });        var pageContext = 'Page: ' + window.location.href;        var systemPrompt = isScriptRequest             ? 'JavaScript code generator. Output ONLY raw executable JS. NO markdown, NO backticks, NO explanations, NO comments. Pure code only. ' + pageContext            : 'You are a friendly and helpful AI assistant. Have natural conversations, answer questions thoughtfully, and be engaging. You can help with coding questions, explain concepts, or just chat. ' + pageContext;        fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {            method: 'POST',            headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },            body: JSON.stringify({                model: 'llama-3.3-70b-versatile',                messages: [{ role: 'system', content: systemPrompt }].concat(conversationHistory),                max_tokens: 1024            })        })        .then(function(r) { return r.json(); })        .then(function(data) {            loadingEl.remove();            if (data.error) throw new Error(data.error.message);                        var assistantMsg = data.choices[0].message.content;            conversationHistory.push({ role: 'assistant', content: assistantMsg });            if (isScriptRequest) {                document.querySelector('[data-tab="console"]').click();                log('AI generating code...', 'info');                var code = assistantMsg.replace(/%60%60%60javascript\n?/gi, '').replace(/%60%60%60js\n?/gi, '').replace(/%60%60%60\n?/g, '').trim();                lastGeneratedCode = code;                retryCount = 0;                consoleInput.value = '';                var i = 0;                function typeIt() {                    if (i < code.length) {                        consoleInput.value += code[i];                        i++;                        setTimeout(typeIt, 8);                    } else {                        log('Code ready. Click Execute to run.', 'success');                    }                }                setTimeout(typeIt, 300);                var m = document.createElement('div');                m.className = 'ai-message assistant';                m.textContent = 'Code sent to console.';                aiMessages.appendChild(m);            } else {                var m = document.createElement('div');                m.className = 'ai-message assistant';                m.textContent = assistantMsg;                aiMessages.appendChild(m);            }            aiSend.disabled = false;            aiMessages.scrollTop = aiMessages.scrollHeight;        })        .catch(function(e) {            loadingEl.remove();            var err = document.createElement('div');            err.className = 'ai-message system';            err.textContent = 'Error: ' + e.message;            aiMessages.appendChild(err);            aiSend.disabled = false;        });    }    aiSend.addEventListener('click', function() {        var msg = aiInput.value.trim();        if (msg) { sendToAI(msg); aiInput.value = ''; }    });    aiInput.addEventListener('keydown', function(e) {        if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); aiSend.click(); }    });    var toolActions = {        getPageInfo: function() {            log('--- Page Info ---', 'info');            log('URL: ' + window.location.href);            log('Title: ' + document.title);            log('Domain: ' + window.location.hostname);        },        getSelection: function() {            var sel = window.getSelection().toString();            if (sel) { log('Selected: ' + sel, 'success'); navigator.clipboard.writeText(sel); }            else { log('No text selected', 'warn'); }        },        getLinks: function() {            var links = Array.from(document.querySelectorAll('a[href]')).map(function(a) { return a.href; });            log('--- Links (' + links.length + ') ---', 'info');            links.slice(0, 20).forEach(function(l) { log(l); });        },        getImages: function() {            var imgs = Array.from(document.querySelectorAll('img[src]')).map(function(i) { return i.src; });            log('--- Images (' + imgs.length + ') ---', 'info');            imgs.slice(0, 20).forEach(function(i) { log(i); });        },        getCookies: function() {            log('--- Cookies ---', 'info');            if (document.cookie) { document.cookie.split(';').forEach(function(c) { log(c.trim()); }); }            else { log('No cookies', 'warn'); }        },        getStorage: function() {            log('--- Local Storage ---', 'info');            for (var i = 0; i < Math.min(localStorage.length, 20); i++) {                var key = localStorage.key(i);                log(key + ': ' + localStorage.getItem(key).substring(0, 100));            }        },        searchGoogle: function() {            var sel = window.getSelection().toString();            if (sel) { window.open('https://www.google.com/search?q=' + encodeURIComponent(sel), '_blank'); }            else { log('No text selected', 'warn'); }        },        clearConsole: function() { consoleOutput.innerHTML = ''; log('Console cleared', 'info'); },        pickElement: function() {            document.getElementById('gpt-pick-btn').classList.toggle('active');            startPicker(false);        },        pickColor: function() {            document.getElementById('gpt-color-btn').classList.toggle('active');            startPicker(true);        },        perfInfo: function() {            log('--- Performance Info ---', 'info');            var perf = window.performance;            if (perf && perf.timing) {                var t = perf.timing;                var pageLoad = t.loadEventEnd - t.navigationStart;                var domReady = t.domContentLoadedEventEnd - t.navigationStart;                var dns = t.domainLookupEnd - t.domainLookupStart;                var tcp = t.connectEnd - t.connectStart;                var ttfb = t.responseStart - t.requestStart;                log('Page Load: ' + pageLoad + 'ms');                log('DOM Ready: ' + domReady + 'ms');                log('DNS Lookup: ' + dns + 'ms');                log('TCP Connect: ' + tcp + 'ms');                log('Time to First Byte: ' + ttfb + 'ms');            }            log('DOM Nodes: ' + document.getElementsByTagName('*').length);            log('Images: ' + document.images.length);            log('Scripts: ' + document.scripts.length);            log('Stylesheets: ' + document.styleSheets.length);            if (perf && perf.memory) {                log('JS Heap: ' + Math.round(perf.memory.usedJSHeapSize / 1048576) + 'MB / ' + Math.round(perf.memory.jsHeapSizeLimit / 1048576) + 'MB');            }        },        networkLog: function() {            if (isNetworkLogging) {                isNetworkLogging = false;                log('Network logging stopped. ' + networkLogs.length + ' requests captured.', 'warn');                return;            }            isNetworkLogging = true;            networkLogs = [];            log('Network logging started...', 'info');            log('Make some requests on this page to see them logged.', 'info');            if (!window._origFetch) {                window._origFetch = window.fetch;                window.fetch = function(url, opts) {                    var method = (opts && opts.method) || 'GET';                    var start = Date.now();                    var urlStr = String(url).substring(0, 80);                    return window._origFetch.apply(this, arguments).then(function(res) {                        var entry = { type: 'fetch', method: method, url: urlStr, status: res.status, time: Date.now() - start };                        networkLogs.push(entry);                        if (isNetworkLogging) log('[FETCH] ' + method + ' ' + urlStr + ' - ' + res.status + ' (' + entry.time + 'ms)', res.ok ? 'success' : 'error');                        return res;                    }).catch(function(err) {                        var entry = { type: 'fetch', method: method, url: urlStr, status: 'ERR', time: Date.now() - start };                        networkLogs.push(entry);                        if (isNetworkLogging) log('[FETCH] ' + method + ' ' + urlStr + ' - FAILED (' + entry.time + 'ms)', 'error');                        throw err;                    });                };            }            if (!window._origXHROpen) {                window._origXHROpen = XMLHttpRequest.prototype.open;                window._origXHRSend = XMLHttpRequest.prototype.send;                XMLHttpRequest.prototype.open = function(m, u) { this._method = m; this._url = u; this._start = Date.now(); return window._origXHROpen.apply(this, arguments); };                XMLHttpRequest.prototype.send = function() {                    var xhr = this;                    xhr.addEventListener('loadend', function() {                        var entry = { type: 'xhr', method: xhr._method, url: String(xhr._url).substring(0, 80), status: xhr.status, time: Date.now() - xhr._start };                        networkLogs.push(entry);                        if (isNetworkLogging) log('[XHR] ' + xhr._method + ' ' + entry.url + ' - ' + (xhr.status || 'ERR') + ' (' + entry.time + 'ms)', xhr.status >= 200 && xhr.status < 400 ? 'success' : 'error');                    });                    return window._origXHRSend.apply(this, arguments);                };            }        },        summarizePage: function() {            log('Reading page content...', 'info');            pageContentCache = getPageContent();            log('Summarizing ' + pageContentCache.length + ' chars...', 'info');            askAIWithContext('Summarize this page in 3-4 bullet points. Be concise.', pageContentCache, true);        },        readAloud: function() {            var sel = window.getSelection().toString();            if (sel) {                log('Reading aloud: "' + sel.substring(0, 50) + '..."', 'info');                speak(sel, function() { log('Done reading.', 'success'); });            } else {                log('Select some text first!', 'warn');            }        },        answerHelper: function() {            var sel = window.getSelection().toString();            if (!sel) {                log('Select a question on the page first!', 'warn');                return;            }            log('Question: "' + sel + '"', 'info');            pageContentCache = getPageContent();            askAIWithContext(sel, pageContentCache, true);        },        chatWithPage: function() {            pageContentCache = getPageContent();            log('Page content loaded (' + pageContentCache.length + ' chars)', 'success');            log('Switch to AI tab and ask questions about this page!', 'info');            document.querySelector('[data-tab="ai"]').click();            var sysMsg = document.createElement('div');            sysMsg.className = 'ai-message system';            sysMsg.textContent = 'Page content loaded. Ask me anything about this page!';            aiMessages.appendChild(sysMsg);            conversationHistory.push({ role: 'system', content: 'Page content for context:\n' + pageContentCache.substring(0, 4000) });        },        changeVoice: function() {            var voices = speechSynth.getVoices();            log('--- Available Voices (' + voices.length + ') ---', 'info');            var goodVoices = voices.filter(function(v) { return v.lang.indexOf('en') === 0; });            goodVoices.slice(0, 15).forEach(function(v, i) {                var marker = (selectedVoice && v.name === selectedVoice.name) ? ' [ACTIVE]' : '';                log((i + 1) + '. ' + v.name + ' (' + v.lang + ')' + marker, selectedVoice && v.name === selectedVoice.name ? 'success' : 'log');            });            log('Type: setVoice(number) to change. e.g. setVoice(3)', 'info');            window.setVoice = function(n) {                if (n > 0 && n <= goodVoices.length) {                    selectedVoice = goodVoices[n - 1];                    log('Voice set to: ' + selectedVoice.name, 'success');                    speak('Hello! This is my new voice.');                } else {                    log('Invalid voice number', 'error');                }            };        },                killSticky: function() {            log('--- Kill Sticky & Ads ---', 'info');            var count = 0;            var els = document.querySelectorAll('*');            els.forEach(function(el) {                var style = getComputedStyle(el);                if (style.position === 'fixed' || style.position === 'sticky') {                    if (!el.closest('#gpt-toolkit-panel')) {                        el.style.position = 'relative';                        count++;                    }                }            });            document.querySelectorAll('[class*="modal"], [class*="popup"], [class*="overlay"], [class*="banner"], [class*="cookie"], [class*="newsletter"], [class*="subscribe"], [class*="paywall"], [class*="interstitial"]').forEach(function(el) {                if (!el.closest('#gpt-toolkit-panel')) {                    el.style.display = 'none';                    count++;                }            });            var adSelectors = [                '[class*="ad-"]', '[class*="-ad"]', '[class*="_ad"]', '[class*="ad_"]',                '[class*="ads-"]', '[class*="-ads"]', '[class*="ads_"]', '[class*="_ads"]',                '[class*="advert"]', '[class*="sponsor"]', '[class*="promo"]',                '[class*="banner"]', '[class*="commercial"]',                '[id*="ad-"]', '[id*="-ad"]', '[id*="_ad"]', '[id*="ad_"]',                '[id*="ads-"]', '[id*="-ads"]', '[id*="ads_"]', '[id*="_ads"]',                '[id*="advert"]', '[id*="sponsor"]', '[id*="promo"]',                '[data-ad]', '[data-ads]', '[data-advert]', '[data-sponsor]',                'ins.adsbygoogle', '[id*="google_ads"]', '[class*="google-ad"]',                '[id*="taboola"]', '[class*="taboola"]',                '[id*="outbrain"]', '[class*="outbrain"]',                '[class*="dfp-"]', '[id*="dfp-"]',                'iframe[src*="doubleclick"]', 'iframe[src*="googlesyndication"]',                'iframe[src*="amazon-adsystem"]', 'iframe[src*="adservice"]',                '[class*="promoted"]', '[class*="suggested"]',                '[aria-label*="advertisement"]', '[aria-label*="sponsored"]'            ];            adSelectors.forEach(function(sel) {                try {                    document.querySelectorAll(sel).forEach(function(el) {                        if (!el.closest('#gpt-toolkit-panel')) {                            el.remove();                            count++;                        }                    });                } catch(e) {}            });            document.querySelectorAll('iframe').forEach(function(iframe) {                var src = (iframe.src || '').toLowerCase();                var isAd = src.indexOf('ad') !== -1 || src.indexOf('banner') !== -1 || src.indexOf('sponsor') !== -1 || src.indexOf('doubleclick') !== -1 || src.indexOf('googlesyndication') !== -1 || iframe.width < 400 && iframe.height < 300;                if (isAd && !iframe.closest('#gpt-toolkit-panel')) {                    iframe.remove();                    count++;                }            });            document.body.style.overflow = 'auto';            document.documentElement.style.overflow = 'auto';            log('Removed ' + count + ' sticky elements & ads', 'success');            log('Note: Some ads may reload. Run again if needed.', 'info');        },        revealPasswords: function() {            var pwFields = document.querySelectorAll('input[type="password"]');            if (pwFields.length === 0) { log('No password fields found', 'warn'); return; }            log('--- Reveal Passwords ---', 'info');            pwFields.forEach(function(el, i) {                if (el.type === 'password') {                    el.type = 'text';                    el.style.border = '2px solid #4a9eff';                    log('Revealed: ' + (el.name || el.id || 'password ' + (i+1)) + ' = ' + el.value, 'success');                } else {                    el.type = 'password';                    el.style.border = '';                }            });            log('Click again to hide passwords', 'info');        },        editPage: function() {            var isEditable = document.body.contentEditable === 'true';            document.body.contentEditable = isEditable ? 'false' : 'true';            if (!isEditable) {                document.body.style.outline = '2px dashed #4a9eff';                log('Edit mode ON - Click anywhere to edit text!', 'success');                log('Click Edit Page again to turn off', 'info');            } else {                document.body.style.outline = '';                log('Edit mode OFF', 'info');            }        },        wireframeMode: function() {            var styleId = 'gpt-wireframe-style';            var existing = document.getElementById(styleId);            if (existing) { existing.remove(); log('Wireframe mode OFF', 'info'); return; }            var css = document.createElement('style');            css.id = styleId;            css.textContent = '* { background: #fff !important; color: #333 !important; border: 1px solid #999 !important; box-shadow: none !important; text-shadow: none !important; } img, video, svg, canvas { opacity: 0.1 !important; } *::before, *::after { display: none !important; }';            document.head.appendChild(css);            log('Wireframe mode ON - See page structure', 'success');            log('Click again to restore colors', 'info');        },        metaTags: function() {            log('--- Meta Tags ---', 'info');            var metas = document.querySelectorAll('meta');            var important = ['description', 'keywords', 'author', 'viewport', 'robots', 'og:title', 'og:description', 'og:image', 'twitter:card', 'twitter:title', 'twitter:description', 'twitter:image'];            metas.forEach(function(m) {                var name = m.getAttribute('name') || m.getAttribute('property') || m.getAttribute('http-equiv');                var content = m.getAttribute('content');                if (name && content) {                    var isImportant = important.some(function(i) { return name.toLowerCase().indexOf(i) !== -1; });                    log(name + ': ' + content.substring(0, 100), isImportant ? 'success' : 'log');                }            });            var canonical = document.querySelector('link[rel="canonical"]');            if (canonical) log('canonical: ' + canonical.href, 'success');            var title = document.querySelector('title');            if (title) log('title: ' + title.textContent, 'success');        },        brokenLinks: function() {            var links = Array.from(document.querySelectorAll('a[href]'));            var externalLinks = links.filter(function(a) {                return a.href.indexOf('http') === 0 && a.href.indexOf(location.hostname) === -1;            }).slice(0, 20);            log('--- Checking ' + externalLinks.length + ' external links ---', 'info');            if (externalLinks.length === 0) { log('No external links to check', 'warn'); return; }            var checked = 0;            externalLinks.forEach(function(a) {                fetch(a.href, { method: 'HEAD', mode: 'no-cors' })                    .then(function() { checked++; log('OK: ' + a.href.substring(0, 60), 'success'); if (checked >= externalLinks.length) log('Done checking links', 'info'); })                    .catch(function() { checked++; log('BROKEN?: ' + a.href.substring(0, 60), 'error'); a.style.outline = '3px solid red'; if (checked >= externalLinks.length) log('Done checking links', 'info'); });            });        },        fontInspector: function() {            log('--- Font Inspector ---', 'info');            var fonts = new Set();            document.querySelectorAll('*').forEach(function(el) {                var font = getComputedStyle(el).fontFamily;                if (font) fonts.add(font.split(',')[0].trim().replace(/["']/g, ''));            });            var fontArr = Array.from(fonts);            log('Found ' + fontArr.length + ' fonts:', 'success');            fontArr.forEach(function(f) { log('  - ' + f); });        },        aiTranslate: function() {            var sel = window.getSelection().toString();            if (!sel) { log('Select text to translate first!', 'warn'); return; }            log('--- AI Translate ---', 'info');            log('Translating: "' + sel.substring(0, 50) + '..."', 'info');            var prompt = 'Translate this to Spanish, French, and German. Format: Spanish: ... | French: ... | German: ...\n\nText: ' + sel;            fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {                method: 'POST',                headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },                body: JSON.stringify({ model: 'llama-3.3-70b-versatile', messages: [{ role: 'user', content: prompt }], max_tokens: 500 })            })            .then(function(r) { return r.json(); })            .then(function(data) {                if (data.error) throw new Error(data.error.message);                var result = data.choices[0].message.content;                log(result, 'success');                navigator.clipboard.writeText(result);                log('Copied to clipboard!', 'info');            })            .catch(function(e) { log('Translation error: ' + e.message, 'error'); });        },        aiRewrite: function() {            var sel = '';            var useStoredInput = false;            if (lastInputElement && lastInputSelection.text && document.body.contains(lastInputElement)) {                sel = lastInputSelection.text;                useStoredInput = true;            } else {                sel = window.getSelection().toString();            }            if (!sel) { log('Select text to rewrite first!', 'warn'); return; }            log('--- AI Rewrite ---', 'info');            log('Rewriting: "' + sel.substring(0, 50) + '..."', 'info');            var prompt = 'Rewrite this text in a professional tone. Output ONLY the rewritten text, nothing else. No labels, no explanations.\n\nText: ' + sel;            fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {                method: 'POST',                headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },                body: JSON.stringify({ model: 'llama-3.3-70b-versatile', messages: [{ role: 'user', content: prompt }], max_tokens: 800 })            })            .then(function(r) { return r.json(); })            .then(function(data) {                if (data.error) throw new Error(data.error.message);                var result = data.choices[0].message.content.trim();                if (useStoredInput && lastInputElement && document.body.contains(lastInputElement)) {                    var el = lastInputElement;                    var start = lastInputSelection.start;                    var end = lastInputSelection.end;                    var text = el.value;                    el.value = text.substring(0, start) + result + text.substring(end);                    el.focus();                    el.selectionStart = el.selectionEnd = start + result.length;                    el.dispatchEvent(new Event('input', { bubbles: true }));                    el.dispatchEvent(new Event('change', { bubbles: true }));                    lastInputElement = null;                    lastInputSelection = { start: 0, end: 0, text: '' };                } else {                    var selection = window.getSelection();                    if (selection.rangeCount > 0) {                        var range = selection.getRangeAt(0);                        range.deleteContents();                        var textNode = document.createTextNode(result);                        range.insertNode(textNode);                    }                }                log('Replaced with: ' + result.substring(0, 60) + '...', 'success');                navigator.clipboard.writeText(result);            })            .catch(function(e) { log('Rewrite error: ' + e.message, 'error'); });        },        aiExtractData: function() {            log('--- AI Extract Data ---', 'info');            var content = '';            var sel = window.getSelection().toString();            if (sel && sel.length > 50) {                content = sel;                log('Extracting from selection (' + content.length + ' chars)...', 'info');            } else {                content = getPageContent();                var formData = [];                document.querySelectorAll('input, textarea, select').forEach(function(el) {                    if (el.closest('#gpt-toolkit-panel')) return;                    var val = el.value;                    if (!val || val.length < 2) return;                    var label = '';                    if (el.id) { var lbl = document.querySelector('label[for="' + el.id + '"]'); if (lbl) label = lbl.textContent.trim(); }                    if (!label && el.name) label = el.name.replace(/([a-z])([A-Z])/g, '$1 $2').replace(/[_-]/g, ' ');                    if (!label && el.placeholder) label = el.placeholder;                    if (!label) label = el.type || 'field';                    if (el.tagName === 'SELECT') { val = el.options[el.selectedIndex] ? el.options[el.selectedIndex].text : val; }                    formData.push(label + ': ' + val);                });                if (formData.length > 0) {                    content += '\n\nFORM DATA FOUND:\n' + formData.join('\n');                    log('Found ' + formData.length + ' form fields with data', 'success');                }                log('Extracting from page (' + content.length + ' chars)...', 'info');            }            var prompt = 'Extract ALL structured data from this text. Find and list:\n\n1. EMAIL ADDRESSES - all emails found\n2. PHONE NUMBERS - all phone numbers (any format)\n3. PHYSICAL ADDRESSES - street addresses, cities, zip codes\n4. NAMES - people names mentioned\n5. COMPANIES/ORGANIZATIONS - business names\n6. DATES - any dates mentioned\n7. URLS/LINKS - website addresses\n8. PRICES/MONEY - any monetary values\n9. SOCIAL MEDIA - usernames, handles\n\nFormat output as:\nEMAILS:\n- email1\n\nPHONES:\n- phone1\n\nADDRESSES:\n- address1\n\nNAMES:\n- name1\n\nCOMPANIES:\n- company1\n\nDATES:\n- date1\n\nURLS:\n- url1\n\nPRICES:\n- price1\n\nSOCIAL:\n- handle1\n\nIf a category has no items, write "None found". Be thorough!\n\nText to analyze:\n' + content.substring(0, 5000);            fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {                method: 'POST',                headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },                body: JSON.stringify({ model: 'llama-3.3-70b-versatile', messages: [{ role: 'user', content: prompt }], max_tokens: 1500 })            })            .then(function(r) { return r.json(); })            .then(function(data) {                if (data.error) throw new Error(data.error.message);                var result = data.choices[0].message.content;                log('--- Extracted Data ---', 'success');                result.split('\n').forEach(function(line) {                    if (line.trim()) {                        var upper = line.toUpperCase();                        if (upper.indexOf('EMAILS') !== -1 || upper.indexOf('PHONES') !== -1 || upper.indexOf('ADDRESSES') !== -1 || upper.indexOf('NAMES') !== -1 || upper.indexOf('COMPANIES') !== -1 || upper.indexOf('DATES') !== -1 || upper.indexOf('URLS') !== -1 || upper.indexOf('PRICES') !== -1 || upper.indexOf('SOCIAL') !== -1) {                            log(line, 'info');                        } else if (line.indexOf('None found') !== -1) {                            log(line, 'warn');                        } else {                            log(line, 'success');                        }                    }                });                navigator.clipboard.writeText(result);                log('--- Copied to clipboard! ---', 'info');            })            .catch(function(e) { log('Extract error: ' + e.message, 'error'); });        },        aiSmartFill: function() {            var inputs = Array.from(document.querySelectorAll('input:not([type=hidden]):not([type=submit]):not([type=button]):not([type=checkbox]):not([type=radio]):not([readonly]), textarea, select'));            inputs = inputs.filter(function(el) { return !el.closest('#gpt-toolkit-panel'); });            var radioGroups = {};            var checkboxGroups = {};            document.querySelectorAll('input[type=radio]').forEach(function(r) {                if (r.closest('#gpt-toolkit-panel')) return;                var name = r.name || r.id || 'radio_' + Math.random();                if (!radioGroups[name]) radioGroups[name] = [];                radioGroups[name].push(r);            });            document.querySelectorAll('input[type=checkbox]').forEach(function(c) {                if (c.closest('#gpt-toolkit-panel')) return;                var container = c.closest('fieldset, .question, [class*="question"], form');                var groupKey = (container ? container.id || container.className : '') + '_cb_' + (c.name || Math.random());                var realGroupKey = c.name || groupKey;                if (!checkboxGroups[realGroupKey]) checkboxGroups[realGroupKey] = [];                checkboxGroups[realGroupKey].push(c);            });            var hasFields = inputs.length > 0 || Object.keys(radioGroups).length > 0 || Object.keys(checkboxGroups).length > 0;            if (!hasFields) { log('No form fields found', 'warn'); return; }            log('--- AI Smart Fill ---', 'info');            log('Analyzing ' + inputs.length + ' fields, ' + Object.keys(radioGroups).length + ' single-choice, ' + Object.keys(checkboxGroups).length + ' multi-select...', 'info');            var cookieData = {};            if (document.cookie) {                document.cookie.split(';').forEach(function(c) {                    var parts = c.trim().split('=');                    if (parts.length >= 2) {                        var key = parts[0].toLowerCase();                        var val = decodeURIComponent(parts.slice(1).join('='));                        try { var parsed = JSON.parse(val); if (typeof parsed === 'object') { Object.assign(cookieData, parsed); } else { cookieData[key] = val; } } catch(e) { cookieData[key] = val; }                    }                });            }            var extractedInfo = [];            var infoKeys = ['name', 'first', 'last', 'firstname', 'lastname', 'email', 'mail', 'city', 'state', 'country', 'zip', 'postal', 'address', 'phone', 'tel', 'user', 'username', 'location', 'region', 'geo', 'lat', 'lon', 'lng'];            for (var k in cookieData) {                var v = cookieData[k];                if (typeof v === 'string' && v.length > 1 && v.length < 100) {                    infoKeys.forEach(function(ik) { if (k.indexOf(ik) !== -1) extractedInfo.push(k + ': ' + v); });                }            }            var localStorageInfo = [];            try {                for (var i = 0; i < Math.min(localStorage.length, 30); i++) {                    var lsKey = localStorage.key(i);                    var lsVal = localStorage.getItem(lsKey);                    if (lsVal && lsVal.length < 500) {                        try { var parsed = JSON.parse(lsVal); if (typeof parsed === 'object') { for (var pk in parsed) { infoKeys.forEach(function(ik) { if (pk.toLowerCase().indexOf(ik) !== -1) extractedInfo.push(pk + ': ' + parsed[pk]); }); } } } catch(e) { infoKeys.forEach(function(ik) { if (lsKey.toLowerCase().indexOf(ik) !== -1) extractedInfo.push(lsKey + ': ' + lsVal); }); }                    }                }            } catch(e) {}            if (extractedInfo.length > 0) { log('Found ' + extractedInfo.length + ' pieces of user info from cookies/storage', 'success'); }            var pageText = getPageContent();            var fieldInfo = inputs.map(function(el, idx) {                var label = '';                if (el.getAttribute('aria-label')) label = el.getAttribute('aria-label');                if (!label && el.id) {                     var lbl = document.querySelector('label[for="' + el.id + '"]');                     if (lbl) label = lbl.textContent.trim().replace(/\*/g, '').trim();                 }                if (!label && el.closest('label')) {                    var labelEl = el.closest('label');                    var clone = labelEl.cloneNode(true);                    var nested = clone.querySelectorAll('input, select, textarea');                    nested.forEach(function(n) { n.remove(); });                    label = clone.textContent.trim().replace(/\*/g, '').trim();                }                if (!label) {                    var prev = el.previousElementSibling;                    if (prev && prev.tagName !== 'INPUT' && prev.tagName !== 'SELECT') {                        var prevText = prev.textContent.trim().substring(0, 50);                        if (prevText.length > 1 && prevText.length < 50) label = prevText;                    }                }                if (!label && el.parentElement) {                    var parent = el.parentElement;                    var prevSib = parent.previousElementSibling;                    if (prevSib) {                        var sibText = prevSib.textContent.trim().substring(0, 50);                        if (sibText.length > 1 && sibText.length < 50) label = sibText;                    }                }                if (!label && el.placeholder) label = el.placeholder;                if (!label) {                    var nameOrId = el.name || el.id || '';                    label = nameOrId.replace(/([a-z])([A-Z])/g, '$1 $2').replace(/[_-]/g, ' ');                }                if (!label) label = 'field ' + idx;                var isSelect = el.tagName === 'SELECT';                var options = isSelect ? Array.from(el.options).filter(function(o) { var t = o.text.toLowerCase(); return t && o.value && t !== 'choose...' && t !== 'select...' && t !== 'select' && t !== 'choose' && t !== '--select--' && t !== '-- select --' && t !== 'please select' && t.indexOf('select a') === -1 && t.indexOf('choose a') === -1 && t.indexOf('select one') === -1; }).map(function(o) { return o.text; }).slice(0, 20).join(', ') : '';                var fieldType = el.type || el.tagName.toLowerCase();                return { idx: idx, el: el, label: label.substring(0, 100), type: fieldType, isSelect: isSelect, options: options, name: el.name || '', placeholder: el.placeholder || '' };            });            var radioInfo = [];            var radioIdx = 0;            for (var groupName in radioGroups) {                var radios = radioGroups[groupName];                var firstRadio = radios[0];                var questionText = '';                var container = firstRadio.closest('fieldset, .question, .quiz-question, [class*="question"], form, div');                if (container) {                    var legend = container.querySelector('legend, .question-text, h2, h3, h4, p');                    if (legend) questionText = legend.textContent.trim();                }                if (!questionText) {                    var parent = firstRadio.parentElement;                    while (parent && parent !== document.body) {                        var prevEl = parent.previousElementSibling;                        if (prevEl) {                            var txt = prevEl.textContent.trim();                            if (txt.length > 10 && txt.length < 500) { questionText = txt; break; }                        }                        parent = parent.parentElement;                    }                }                if (!questionText) questionText = 'Question ' + (radioIdx + 1);                var choices = radios.map(function(r, i) {                    var choiceText = '';                    var lbl = document.querySelector('label[for="' + r.id + '"]');                    if (lbl) choiceText = lbl.textContent.trim();                    if (!choiceText && r.parentElement && r.parentElement.tagName === 'LABEL') {                        choiceText = r.parentElement.textContent.trim();                    }                    if (!choiceText && r.nextSibling) {                        choiceText = (r.nextSibling.textContent || '').trim();                    }                    if (!choiceText) choiceText = r.value || ('Option ' + (i + 1));                    choiceText = choiceText.replace(/\s*(Correct|Incorrect|correct|incorrect|Correct answer|Wrong|Right)\s*/gi, ' ').trim();                    choiceText = choiceText.replace(/^[A-Z][\.\)\s]+/i, '').trim();                    return { radio: r, text: choiceText, index: i };                });                radioInfo.push({ idx: radioIdx, groupName: groupName, question: questionText.substring(0, 300), choices: choices, radios: radios });                radioIdx++;            }            var checkboxInfo = [];            var cbIdx = 0;            for (var cbGroupName in checkboxGroups) {                var checkboxes = checkboxGroups[cbGroupName];                if (checkboxes.length < 2) continue;                var firstCb = checkboxes[0];                var questionText = '';                var container = firstCb.closest('fieldset, .question, [class*="question"], form, div');                if (container) {                    var legend = container.querySelector('legend, .question-text, h2, h3, h4, p, label');                    if (legend && !legend.querySelector('input')) questionText = legend.textContent.trim();                }                if (!questionText) {                    var parent = firstCb.parentElement;                    while (parent && parent !== document.body && !questionText) {                        var prevEl = parent.previousElementSibling;                        if (prevEl) {                            var txt = prevEl.textContent.trim();                            if (txt.length > 10 && txt.length < 500 && txt.indexOf('?') !== -1) { questionText = txt; break; }                        }                        parent = parent.parentElement;                    }                }                if (!questionText) questionText = 'Select all that apply - Question ' + (cbIdx + 1);                var cbChoices = checkboxes.map(function(cb, i) {                    var choiceText = '';                    var lbl = document.querySelector('label[for="' + cb.id + '"]');                    if (lbl) choiceText = lbl.textContent.trim();                    if (!choiceText && cb.parentElement && cb.parentElement.tagName === 'LABEL') {                        choiceText = cb.parentElement.textContent.trim();                    }                    if (!choiceText && cb.nextSibling) {                        choiceText = (cb.nextSibling.textContent || '').trim();                    }                    if (!choiceText) choiceText = cb.value || ('Option ' + (i + 1));                    choiceText = choiceText.replace(/\s*(Correct|Incorrect|correct|incorrect|Correct answer|Wrong|Right)\s*/gi, ' ').trim();                    choiceText = choiceText.replace(/^[A-Z][\.\)\s]+/i, '').trim();                    return { checkbox: cb, text: choiceText, index: i };                });                checkboxInfo.push({ idx: cbIdx, groupName: cbGroupName, question: questionText.substring(0, 300), choices: cbChoices, checkboxes: checkboxes });                cbIdx++;            }            var pageContext = getPageContent().substring(0, 4000);            var prompt = 'You are a form-filling assistant. Fill each field with appropriate fake data.\n\n';            if (fieldInfo.length > 0) {                prompt += 'FORM FIELDS TO FILL (use index i exactly as shown):\n';                fieldInfo.forEach(function(f, i) {                    var desc = 'i=' + i + ': "' + f.label + '"';                    if (f.isSelect) desc += ' [DROPDOWN - pick from: ' + f.options + ']';                    else if (f.type === 'email') desc += ' [enter email address]';                    else if (f.type === 'tel' || f.label.toLowerCase().indexOf('phone') !== -1) desc += ' [enter phone like 555-123-4567]';                    else if (f.label.toLowerCase().indexOf('zip') !== -1 || f.label.toLowerCase().indexOf('postal') !== -1) desc += ' [enter 5-digit zip like 90210]';                    else if (f.label.toLowerCase().indexOf('city') !== -1) desc += ' [enter city name]';                    else if (f.label.toLowerCase().indexOf('street') !== -1 || f.label.toLowerCase().indexOf('address') !== -1) desc += ' [enter street address]';                    else if (f.label.toLowerCase().indexOf('first') !== -1) desc += ' [enter first name]';                    else if (f.label.toLowerCase().indexOf('last') !== -1) desc += ' [enter last name]';                    else if (f.label.toLowerCase().indexOf('middle') !== -1) desc += ' [enter middle name]';                    prompt += desc + '\n';                });            }            if (radioInfo.length > 0) {                prompt += '\nMULTIPLE CHOICE QUESTIONS:\n';                radioInfo.forEach(function(q, i) {                    prompt += (i + 1) + '. Question: "' + q.question + '"\n   Options: ';                    prompt += q.choices.map(function(c, j) { return String.fromCharCode(65 + j) + ') ' + c.text; }).join(' | ') + '\n';                });            }            if (checkboxInfo.length > 0) {                prompt += '\nSELECT ALL THAT APPLY (check multiple):\n';                checkboxInfo.forEach(function(q, i) {                    prompt += (i + 1) + '. Question: "' + q.question + '"\n   Options: ';                    prompt += q.choices.map(function(c, j) { return String.fromCharCode(65 + j) + ') ' + c.text; }).join(' | ') + '\n';                });            }            prompt += '\nINSTRUCTIONS:\n- Match the field index (i) exactly - do not skip or reorder fields\n- For text fields, generate realistic fake data appropriate to the field label\n- For ZIP/postal code fields, use a 5-digit number like 90210, 10001, 60601\n- For City fields, use a city name like Los Angeles, Chicago, Miami\n- For dropdown/select fields, pick a REAL option from the provided list (NEVER use placeholder text like Choose, Select, etc.)\n- For State fields, pick a real US state name from the options\n- For Country fields, pick a real country name from the options (prefer United States)\n- For MULTIPLE CHOICE questions, pick the ONE correct answer letter\n- For SELECT ALL THAT APPLY, list ALL correct answer letters\n';            prompt += '\nRESPOND WITH ONLY THIS JSON FORMAT:\n{"f":[{"i":0,"a":"value for field 0"},{"i":1,"a":"value for field 1"}],"mc":[{"i":0,"a":"A"}],"sa":[{"i":0,"a":["A","B"]}]}\n\nCRITICAL: The "i" value MUST match the field index shown above. Return ALL fields in order.\nf=form fields, mc=multiple choice, sa=select all. Output ONLY valid JSON, no other text.';            log('Asking AI...', 'info');            fetchWithProxy('https://api.groq.com/openai/v1/chat/completions', {                method: 'POST',                headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + API_KEY },                body: JSON.stringify({ model: 'llama-3.3-70b-versatile', messages: [{ role: 'user', content: prompt }], max_tokens: 1500 })            })            .then(function(r) { return r.json(); })            .then(function(data) {                if (data.error) throw new Error(data.error.message);                var resp = data.choices[0].message.content;                log('AI response received, parsing...', 'info');                resp = resp.replace(/```json\n?/gi, '').replace(/```\n?/g, '').trim();                var depth = 0; var start = -1; var end = -1;                for (var ci = 0; ci < resp.length; ci++) {                    if (resp[ci] === '{') { if (start === -1) start = ci; depth++; }                    else if (resp[ci] === '}') { depth--; if (depth === 0 && start !== -1) { end = ci + 1; break; } }                }                if (start === -1 || end === -1) throw new Error('No JSON found');                resp = resp.substring(start, end);                var parsed;                try { parsed = JSON.parse(resp); } catch(e) {                    log('Raw: ' + resp.substring(0, 150), 'warn');                    throw e;                }                var answers = parsed.f || parsed.fields || [];                var mcAnswers = parsed.mc || parsed.multipleChoice || [];                var selectAllAnswers = parsed.sa || parsed.selectAll || [];                log('Got ' + answers.length + ' fields, ' + mcAnswers.length + ' single-choice, ' + selectAllAnswers.length + ' multi-select...', 'success');                var mcQueue = mcAnswers.slice();                var saQueue = selectAllAnswers.slice();                function clickRadio() {                    if (mcQueue.length === 0) { clickCheckboxes(); return; }                    var mc = mcQueue.shift();                    var q = radioInfo[mc.i !== undefined ? mc.i : mc.idx];                    if (!q) { setTimeout(clickRadio, 50); return; }                    var answerLetter = (mc.a || mc.answer || '').toUpperCase().charAt(0);                    var choiceIdx = answerLetter.charCodeAt(0) - 65;                    if (choiceIdx >= 0 && choiceIdx < q.choices.length) {                        var radio = q.choices[choiceIdx].radio;                        radio.scrollIntoView({ behavior: 'smooth', block: 'center' });                        setTimeout(function() {                            radio.focus();                            radio.click();                            radio.checked = true;                            radio.dispatchEvent(new MouseEvent('click', { bubbles: true }));                            radio.dispatchEvent(new Event('input', { bubbles: true }));                            radio.dispatchEvent(new Event('change', { bubbles: true }));                            var label = document.querySelector('label[for="' + radio.id + '"]') || radio.closest('label');                            if (label) label.click();                            log('Answered: ' + q.question.substring(0, 40) + '... = ' + answerLetter + ') ' + q.choices[choiceIdx].text.substring(0, 30), 'success');                            setTimeout(clickRadio, 150);                        }, 100);                    } else { setTimeout(clickRadio, 50); }                }                function clickCheckboxes() {                    if (saQueue.length === 0) { fillFields(); return; }                    var sa = saQueue.shift();                    var q = checkboxInfo[sa.i !== undefined ? sa.i : sa.idx];                    if (!q) { setTimeout(clickCheckboxes, 50); return; }                    var selectedLetters = sa.a || sa.answers || [];                    var cbIdx = 0;                    function clickNextCb() {                        if (cbIdx >= selectedLetters.length) { setTimeout(clickCheckboxes, 100); return; }                        var letter = selectedLetters[cbIdx];                        var choiceIdx = (letter || '').toUpperCase().charCodeAt(0) - 65;                        if (choiceIdx >= 0 && choiceIdx < q.choices.length) {                            var cb = q.choices[choiceIdx].checkbox;                            cb.scrollIntoView({ behavior: 'smooth', block: 'center' });                            setTimeout(function() {                                cb.focus();                                cb.click();                                cb.checked = true;                                cb.dispatchEvent(new MouseEvent('click', { bubbles: true }));                                cb.dispatchEvent(new Event('input', { bubbles: true }));                                cb.dispatchEvent(new Event('change', { bubbles: true }));                                var label = document.querySelector('label[for="' + cb.id + '"]') || cb.closest('label');                                if (label) label.click();                                log('Checked: ' + q.question.substring(0, 30) + '... = ' + letter + ') ' + q.choices[choiceIdx].text.substring(0, 25), 'success');                                cbIdx++;                                setTimeout(clickNextCb, 100);                            }, 80);                        } else { cbIdx++; setTimeout(clickNextCb, 50); }                    }                    clickNextCb();                }                function fillFields() {                    var queue = answers.slice();                    fillNext(queue);                }                function fillNext(queue) {                    if (queue.length === 0) { log('AI Smart Fill complete!', 'success'); return; }                    var item = queue.shift();                    var field = fieldInfo[item.i !== undefined ? item.i : item.idx];                    if (!field) { fillNext(queue); return; }                    var el = field.el;                    var val = String(item.a || item.answer || '');                    if (field.isSelect) {                        el.focus();                        el.scrollIntoView({ behavior: 'smooth', block: 'center' });                        var valLower = val.toLowerCase();                        var found = false;                        var isPlaceholder = function(txt) { var t = txt.toLowerCase(); return t === 'choose...' || t === 'select...' || t === 'choose' || t === 'select' || t === '--select--' || t === '-- select --' || t === 'please select' || t.indexOf('select a') === 0 || t.indexOf('choose a') === 0 || t === '' || t === '-'; };                        if (isPlaceholder(val)) {                            for (var i = 1; i < el.options.length; i++) {                                if (!isPlaceholder(el.options[i].text) && el.options[i].value) {                                    el.selectedIndex = i;                                    el.dispatchEvent(new Event('focus', { bubbles: true }));                                    el.dispatchEvent(new Event('input', { bubbles: true }));                                    el.dispatchEvent(new Event('change', { bubbles: true }));                                    log('Auto-selected first real option: ' + field.label + ' = ' + el.options[i].text, 'success');                                    found = true;                                    break;                                }                            }                        } else {                            for (var i = 0; i < el.options.length; i++) {                                var optText = el.options[i].text.toLowerCase();                                var optVal = el.options[i].value.toLowerCase();                                if (isPlaceholder(el.options[i].text)) continue;                                if (optText.indexOf(valLower) !== -1 || valLower.indexOf(optText) !== -1 || optVal.indexOf(valLower) !== -1 || valLower.indexOf(optVal) !== -1) {                                    el.selectedIndex = i;                                    el.dispatchEvent(new Event('focus', { bubbles: true }));                                    el.dispatchEvent(new Event('input', { bubbles: true }));                                    el.dispatchEvent(new Event('change', { bubbles: true }));                                    el.dispatchEvent(new Event('blur', { bubbles: true }));                                    log('Selected: ' + field.label + ' = ' + el.options[i].text, 'success');                                    found = true;                                    break;                                }                            }                        }                        if (!found) {                            var preferredOptions = ['united states', 'usa', 'us', 'california', 'new york', 'texas'];                            var fallbackIdx = -1;                            for (var i = 1; i < el.options.length; i++) {                                if (!isPlaceholder(el.options[i].text) && el.options[i].value) {                                    var optLower = el.options[i].text.toLowerCase();                                    if (preferredOptions.indexOf(optLower) !== -1) { fallbackIdx = i; break; }                                    if (fallbackIdx === -1) fallbackIdx = i;                                }                            }                            if (fallbackIdx > 0) {                                el.selectedIndex = fallbackIdx;                                el.dispatchEvent(new Event('change', { bubbles: true }));                                log('Fallback selected: ' + field.label + ' = ' + el.options[fallbackIdx].text, 'warn');                                found = true;                            }                        }                        if (!found) { log('Could not find option for: ' + field.label, 'warn'); }                        setTimeout(fillNext.bind(null, queue), 150);                    } else if (field.type === 'date') {                        el.focus();                        el.value = val;                        el.dispatchEvent(new Event('input', { bubbles: true }));                        el.dispatchEvent(new Event('change', { bubbles: true }));                        log('Filled: ' + field.label + ' = ' + val, 'success');                        setTimeout(function() { el.blur(); fillNext(queue); }, 80);                    } else {                        el.focus();                        el.value = '';                        var c = 0;                        function typeChar() {                            if (c < val.length) {                                el.value += val[c];                                el.dispatchEvent(new Event('input', { bubbles: true }));                                c++;                                setTimeout(typeChar, 12);                            } else {                                el.dispatchEvent(new Event('change', { bubbles: true }));                                log('Filled: ' + field.label + ' = ' + val.substring(0, 40), 'success');                                setTimeout(function() { el.blur(); fillNext(queue); }, 80);                            }                        }                        typeChar();                    }                }                clickRadio();            })            .catch(function(e) { var errMsg = e.message || String(e); if (errMsg.indexOf('Content Security Policy') !== -1 || errMsg.indexOf('Failed to fetch') !== -1 || errMsg.indexOf('NetworkError') !== -1 || errMsg.indexOf('blocked') !== -1 || errMsg.indexOf('CORS') !== -1) { log('AI Smart Fill blocked by school network', 'error'); log('Groq API is being blocked. Try mobile hotspot or VPN.', 'warn'); } else { log('AI Smart Fill error: ' + errMsg, 'error'); } });        }    };    document.querySelectorAll('.gpt-tool-btn').forEach(function(btn) {        btn.addEventListener('click', function() {            var action = btn.dataset.action;            if (toolActions[action]) {                document.querySelector('[data-tab="console"]').click();                toolActions[action]();            }        });    });    log('Developer Toolkit initialized', 'success');    log('Type JavaScript commands or use the Tools tab', 'info');})();
